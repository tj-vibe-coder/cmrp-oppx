<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Toggle Test - CORRECTED REQUIREMENTS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors">
    <div class="simple-header">
        <div class="title-group">
            <img id="cmrpLogo" src="Logo/CMRP Logo Light.svg" alt="CMRP Logo" style="height:2.2rem;width:auto;"/>
            <span class="subtitle">Theme Toggle Test - CORRECTED REQUIREMENTS</span>
        </div>
        <nav class="flex gap-2">
            <button id="themeToggle" class="nav-square-btn" title="Toggle theme">
                <span class="material-icons">wb_sunny</span>
            </button>
        </nav>
    </div>

    <main class="p-8" style="padding-top: 5rem;">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-3xl font-bold mb-8 text-gray-900 dark:text-white">Theme Toggle Functionality Test - CORRECTED REQUIREMENTS</h1>
            
            <div class="bg-yellow-100 dark:bg-yellow-900 border border-yellow-300 dark:border-yellow-700 p-4 rounded-lg mb-6">
                <h2 class="text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2">‚úÖ CORRECTED REQUIREMENTS (June 2025)</h2>
                <ul class="text-yellow-700 dark:text-yellow-300 space-y-1 text-sm">
                    <li>‚Ä¢ <strong>Theme Toggle Icon:</strong> ALWAYS shows sun icon (wb_sunny) regardless of current theme</li>
                    <li>‚Ä¢ <strong>CMRP Logo:</strong> ALWAYS uses light logo (header is always dark)</li>
                    <li>‚Ä¢ <strong>Login Button:</strong> ALWAYS blue color (#1a73e8) in both themes</li>
                    <li>‚Ä¢ <strong>Apply to ALL pages</strong> consistently</li>
                </ul>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Current Theme Status</h2>
                    <div class="space-y-2">
                        <p class="text-gray-700 dark:text-gray-300">Current Theme: <span id="currentTheme" class="font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">-</span></p>
                        <p class="text-gray-700 dark:text-gray-300">Toggle Icon: <span id="toggleIcon" class="font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">-</span></p>
                        <p class="text-gray-700 dark:text-gray-300">Logo Source: <span id="logoSrc" class="font-mono bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs">-</span></p>
                        <div class="mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded">
                            <p class="text-sm font-semibold text-gray-900 dark:text-white">Expected Behavior:</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Icon: Always "wb_sunny" | Logo: Always "Light.svg"</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Test Actions</h2>
                    <div class="space-y-3">
                        <button id="testToggle" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors">
                            Toggle Theme (Test)
                        </button>
                        <button id="setLight" class="w-full bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded transition-colors">
                            Force Light Mode
                        </button>
                        <button id="setDark" class="w-full bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded transition-colors">
                            Force Dark Mode
                        </button>
                        <button id="clearStorage" class="w-full bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded transition-colors">
                            Clear Theme Storage
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mb-8">
                <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Page Links (Test Cross-Page Sync)</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                    <a href="index.html" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-center transition-colors">Main App</a>
                    <a href="login.html" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded text-center transition-colors">Login</a>
                    <a href="win-loss_dashboard.html" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded text-center transition-colors">Win-Loss</a>
                    <a href="executive_dashboard.html" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-center transition-colors">Executive</a>
                    <a href="forecastr_dashboard.html" class="bg-teal-500 hover:bg-teal-600 text-white px-4 py-2 rounded text-center transition-colors">Forecast</a>
                    <a href="user_management.html" class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded text-center transition-colors">User Mgmt</a>
                    <a href="update_password.html" class="bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded text-center transition-colors">Update Pass</a>
                </div>
            </div>

            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Expected Behavior</h2>
                <div class="space-y-4 text-gray-700 dark:text-gray-300">
                    <div>
                        <h3 class="font-semibold text-gray-900 dark:text-white">‚úÖ Dark Mode (Default):</h3>
                        <ul class="list-disc pl-6 space-y-1">
                            <li>Toggle icon shows <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded">wb_sunny</code> (sun)</li>
                            <li>Logo shows <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded">CMRP Logo Light.svg</code></li>
                            <li>Background is dark</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 dark:text-white">‚òÄÔ∏è Light Mode:</h3>
                        <ul class="list-disc pl-6 space-y-1">
                            <li>Toggle icon shows <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded">dark_mode</code> (moon)</li>
                            <li>Logo shows <code class="bg-gray-100 dark:bg-gray-700 px-1 rounded">CMRP Logo Dark.svg</code></li>
                            <li>Background is light</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-900 dark:text-white">üîÑ Cross-Tab Sync:</h3>
                        <ul class="list-disc pl-6 space-y-1">
                            <li>Changing theme on one page should update all open pages</li>
                            <li>Theme should persist across browser sessions</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Theme Management Functions - CORRECTED REQUIREMENTS
        function applyTheme(theme) {
            const isDark = theme === 'dark';
            document.documentElement.classList.toggle('dark', isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            // CORRECTED: Always show sun icon regardless of theme
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                const icon = themeToggle.querySelector('.material-icons');
                if (icon) icon.textContent = 'wb_sunny';
            }
            
            // CORRECTED: Always use light logo (header is always dark)
            const logo = document.getElementById('cmrpLogo');
            if (logo) {
                logo.src = 'Logo/CMRP Logo Light.svg';
            }
            
            updateStatus();
        }

        function toggleTheme() {
            const currentTheme = localStorage.getItem('theme') || 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
        }

        function updateStatus() {
            const theme = localStorage.getItem('theme') || 'light';
            const icon = document.querySelector('#themeToggle .material-icons');
            const logo = document.getElementById('cmrpLogo');
            
            document.getElementById('currentTheme').textContent = theme;
            document.getElementById('toggleIcon').textContent = icon ? icon.textContent : 'N/A';
            document.getElementById('logoSrc').textContent = logo ? logo.src.split('/').pop() : 'N/A';
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            applyTheme(savedTheme);
            
            // Theme toggle button
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            // Test buttons
            document.getElementById('testToggle').addEventListener('click', toggleTheme);
            document.getElementById('setLight').addEventListener('click', () => applyTheme('light'));
            document.getElementById('setDark').addEventListener('click', () => applyTheme('dark'));
            document.getElementById('clearStorage').addEventListener('click', () => {
                localStorage.removeItem('theme');
                applyTheme('dark'); // Default to dark
            });
            
            updateStatus();
        });

        // Sync theme changes across tabs/pages
        window.addEventListener('storage', function(e) {
            if (e.key === 'theme') {
                const newTheme = e.newValue || 'dark';
                applyTheme(newTheme);
            }
        });

        // Update status every second to catch changes
        setInterval(updateStatus, 1000);
    </script>
</body>
</html>
